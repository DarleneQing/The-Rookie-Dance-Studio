# Context
File name: 2025-12-14_6_user_mgmt.md
Created at: 2025-12-14
Created by: Assistant
Main branch: main
Task Branch: task/user-mgmt_2025-12-14_6
Yolo Mode: Off

# Task Description
Implement User Management for Admins.
Requirements:
- List all users (searchable).
- View User Details.
- Assign Subscription (Modal/Form).
  - Select Type (Monthly, 5x, 10x).
  - Select Start Date (for Monthly).
- Archive old subscription (handled by DB function).

# Project Overview
Next.js 14 app. Admin only.

⚠️ WARNING: NEVER MODIFY THIS SECTION ⚠️
1.  **Stop and Think**: Always pause to analyze before acting.
2.  **Mode Declaration**: Start every response with the current mode (e.g., [MODE: RESEARCH]).
3.  **Task File Management**: Create and maintain a task file for every task.
4.  **Protocol Adherence**: Follow the defined steps for each mode (Research -> Innovate -> Plan -> Execute -> Review).
5.  **Code References**: Use correct citation format for existing code.
⚠️ WARNING: NEVER MODIFY THIS SECTION ⚠️

# Analysis
- Route: `app/admin/users/page.tsx`.
- Component: `UsersTable` (Client Component).
- Component: `AssignSubscriptionDialog`.
- Actions: `assignSubscription(userId, type, date)`.
- RPC: `assign_subscription` exists in DB.

# Proposed Solution
1. Create `app/admin/users/page.tsx` (fetches all profiles).
2. Create `components/admin/users-table.tsx` (using Shadcn Table).
3. Create `components/admin/assign-subscription-dialog.tsx`.
4. Implement `assignSubscription` action in `app/admin/actions.ts`.

# Current execution step: "Done"

# Task Progress
[2025-12-14]
- Task file created.
- Created `AssignSubscriptionDialog` and `UsersTable`.
- Created `Select` and `Table` UI components.
- Created `app/admin/users/page.tsx`.
- Implemented `assignUserSubscription` server action.

# Final Review:
Admins can now list users and assign subscriptions correctly.
Status: Completed
